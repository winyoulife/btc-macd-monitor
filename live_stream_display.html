<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>ğŸš€ BTCç›´æ’­ç›‘æ§ ğŸš€</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            background: linear-gradient(135deg, #0a0a23, #1a1a2e, #16213e);
            color: #00ff88;
            font-family: 'Courier New', monospace;
            font-weight: bold;
            overflow: hidden;
            height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        .header {
            background: rgba(0,0,0,0.9);
            padding: 20px 0;
            text-align: center;
            border-bottom: 3px solid #00ff88;
        }
        
        .title {
            font-size: 3.5em;
            text-shadow: 0 0 30px #00ff88;
            animation: glow 2s ease-in-out infinite alternate;
            margin-bottom: 10px;
        }
        
        .subtitle {
            font-size: 1.5em;
            color: #ffaa00;
        }
        
        @keyframes glow {
            from { text-shadow: 0 0 30px #00ff88; }
            to { text-shadow: 0 0 50px #00ff88, 0 0 60px #00ff88; }
        }
        
        .main-content {
            flex: 1;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            padding: 30px;
            align-items: center;
        }
        
        .price-section {
            text-align: center;
            background: rgba(0,0,0,0.8);
            border: 3px solid #00ff88;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 0 40px rgba(0,255,136,0.3);
        }
        
        .price-label {
            font-size: 2.5em;
            margin-bottom: 20px;
            color: #ffaa00;
        }
        
        .current-price {
            font-size: 6em;
            font-weight: bold;
            margin: 30px 0;
            text-shadow: 0 0 20px #00ff88;
            animation: pulse 3s ease-in-out infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        .price-change {
            font-size: 2.5em;
            margin: 20px 0;
            padding: 15px;
            border-radius: 10px;
            font-weight: bold;
        }
        
        .signals-section {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .signal-box {
            background: rgba(0,20,40,0.9);
            border: 3px solid;
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            min-height: 180px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        
        .buy-signal {
            border-color: #00ff00;
            background: rgba(0,255,0,0.1);
        }
        
        .sell-signal {
            border-color: #ff4444;
            background: rgba(255,68,68,0.1);
        }
        
        .signal-title {
            font-size: 2.2em;
            font-weight: bold;
            margin-bottom: 15px;
        }
        
        .signal-status {
            font-size: 4em;
            font-weight: bold;
            margin: 10px 0;
            animation: flash 2s ease-in-out infinite;
        }
        
        .signal-strength {
            font-size: 1.8em;
            margin-top: 10px;
        }
        
        @keyframes flash {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        
        .market-info {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(0,0,0,0.9);
            padding: 15px;
            text-align: center;
            border-top: 2px solid #00ff88;
            font-size: 1.3em;
            display: flex;
            justify-content: space-around;
        }
        
        .info-item {
            color: #ffaa00;
        }
        
        .update-time {
            position: fixed;
            top: 10px;
            right: 20px;
            background: rgba(0,0,0,0.8);
            padding: 10px 15px;
            border-radius: 8px;
            border: 1px solid #00ff88;
            font-size: 1.1em;
        }
        
        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 1200px) {
            .main-content {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            .current-price {
                font-size: 5em;
            }
            .signal-status {
                font-size: 3em;
            }
        }
        
        /* å¼ºè°ƒé¢œè‰² */
        .green { color: #00ff00; background: rgba(0,255,0,0.1); }
        .red { color: #ff4444; background: rgba(255,68,68,0.1); }
        .yellow { color: #ffaa00; background: rgba(255,170,0,0.1); }
    </style>
</head>
<body>
    <div class="update-time" id="updateTime">
        æœ€å¾Œæ›´æ–°: --
    </div>

    <div class="header">
        <div class="title">ğŸš€ BTC ç›´æ’­ç›‘æ§ç«™ ğŸš€</div>
        <div class="subtitle">ğŸ“Š å®æ—¶ä»·æ ¼ | ğŸ¯ äº¤æ˜“ä¿¡å· | ğŸ’° æŠ•èµ„å‚è€ƒ</div>
    </div>

    <div class="main-content">
        <!-- ä»·æ ¼æ˜¾ç¤ºåŒº -->
        <div class="price-section">
            <div class="price-label">ğŸ’° BTC/USDT</div>
            <div class="current-price" id="currentPrice">è¼‰å…¥ä¸­...</div>
            <div class="price-change" id="priceChange">--</div>
        </div>

        <!-- äº¤æ˜“ä¿¡å·åŒº -->
        <div class="signals-section">
            <div class="signal-box buy-signal" id="buySignalBox">
                <div class="signal-title" style="color: #00ff00;">
                    ğŸ“ˆ ä¹°å…¥ä¿¡å·
                </div>
                <div class="signal-status" id="buySignalStatus">
                    æ£€æµ‹ä¸­...
                </div>
                <div class="signal-strength" id="buySignalStrength">
                    --
                </div>
            </div>

            <div class="signal-box sell-signal" id="sellSignalBox">
                <div class="signal-title" style="color: #ff4444;">
                    ğŸ“‰ å–å‡ºä¿¡å·
                </div>
                <div class="signal-status" id="sellSignalStatus">
                    æ£€æµ‹ä¸­...
                </div>
                <div class="signal-strength" id="sellSignalStrength">
                    --
                </div>
            </div>
        </div>
    </div>

    <div class="market-info">
        <div class="info-item">
            24Hé«˜: <span id="high24h">--</span>
        </div>
        <div class="info-item">
            24Hä½: <span id="low24h">--</span>
        </div>
        <div class="info-item">
            æˆäº¤é‡: <span id="volume24h">--</span>
        </div>
        <div class="info-item">
            å¸‚å€¼: <span>#1</span>
        </div>
    </div>

    <script>
        // å…¨å±€å˜é‡
        let priceData = [];
        let currentPrice = 0;
        let previousPrice = 0;

        // è®¡ç®—æŠ€æœ¯æŒ‡æ ‡ï¼ˆç®€åŒ–ç‰ˆï¼‰
        function calculateIndicators(prices) {
            if (prices.length < 26) return null;
            
            // è®¡ç®—MACD
            const macd = calculateMACD(prices);
            
            // è®¡ç®—RSI
            const rsi = calculateRSI(prices, 14);
            
            // è®¡ç®—å¸ƒæ—é€šé“
            const bb = calculateBollingerBands(prices, 20, 2);
            
            // è®¡ç®—ç§»åŠ¨å¹³å‡
            const ma5 = calculateMA(prices, 5);
            const ma10 = calculateMA(prices, 10);
            
            return { macd, rsi, bb, ma5, ma10 };
        }

        // MACDè®¡ç®—
        function calculateMACD(prices) {
            const ema12 = calculateEMA(prices, 12);
            const ema26 = calculateEMA(prices, 26);
            
            if (!ema12 || !ema26) return null;
            
            const macdLine = ema12 - ema26;
            const signal = calculateEMA([macdLine], 9);
            const histogram = macdLine - (signal || 0);
            
            return { macdLine, signal, histogram };
        }

        // RSIè®¡ç®—
        function calculateRSI(prices, period) {
            if (prices.length < period + 1) return null;
            
            let gains = 0, losses = 0;
            
            for (let i = prices.length - period; i < prices.length; i++) {
                const change = prices[i] - prices[i-1];
                if (change > 0) gains += change;
                else losses -= change;
            }
            
            const avgGain = gains / period;
            const avgLoss = losses / period;
            
            if (avgLoss === 0) return 100;
            
            const rs = avgGain / avgLoss;
            return 100 - (100 / (1 + rs));
        }

        // å¸ƒæ—é€šé“è®¡ç®—
        function calculateBollingerBands(prices, period, multiplier) {
            if (prices.length < period) return null;
            
            const recentPrices = prices.slice(-period);
            const sma = recentPrices.reduce((a, b) => a + b) / period;
            
            const variance = recentPrices.reduce((sum, price) => {
                return sum + Math.pow(price - sma, 2);
            }, 0) / period;
            
            const stdDev = Math.sqrt(variance);
            
            return {
                upper: sma + (stdDev * multiplier),
                middle: sma,
                lower: sma - (stdDev * multiplier)
            };
        }

        // EMAè®¡ç®—
        function calculateEMA(prices, period) {
            if (prices.length < period) return null;
            
            const multiplier = 2 / (period + 1);
            let ema = prices[0];
            
            for (let i = 1; i < prices.length; i++) {
                ema = (prices[i] * multiplier) + (ema * (1 - multiplier));
            }
            
            return ema;
        }

        // ç§»åŠ¨å¹³å‡è®¡ç®—
        function calculateMA(prices, period) {
            if (prices.length < period) return null;
            
            const recentPrices = prices.slice(-period);
            return recentPrices.reduce((a, b) => a + b) / period;
        }

        // æ›´æ–°äº¤æ˜“ä¿¡å·ï¼ˆç®€åŒ–ç‰ˆï¼Œé€‚åˆç›´æ’­ï¼‰
        function updateTradingSignals(indicators) {
            if (!indicators) return;
            
            let buyCount = 0, sellCount = 0;
            
            // æ£€æŸ¥ä¹°å…¥æ¡ä»¶
            const macdBuy = indicators.macd && indicators.macd.histogram > 0;
            const rsiBuy = indicators.rsi && indicators.rsi < 30;
            const maBuy = indicators.ma5 && indicators.ma10 && 
                         priceData[priceData.length - 1] > indicators.ma5;
            const bbBuy = indicators.bb && 
                         priceData[priceData.length - 1] < indicators.bb.lower;
            
            buyCount = [macdBuy, rsiBuy, maBuy, bbBuy].filter(Boolean).length;
            
            // æ£€æŸ¥å–å‡ºæ¡ä»¶
            const macdSell = indicators.macd && indicators.macd.histogram < 0;
            const rsiSell = indicators.rsi && indicators.rsi > 70;
            const maSell = indicators.ma5 && indicators.ma10 && 
                          priceData[priceData.length - 1] < indicators.ma5;
            const bbSell = indicators.bb && 
                          priceData[priceData.length - 1] > indicators.bb.upper;
            
            sellCount = [macdSell, rsiSell, maSell, bbSell].filter(Boolean).length;
            
            // æ›´æ–°ä¹°å…¥ä¿¡å·æ˜¾ç¤º
            updateSignalDisplay('buy', buyCount, 4);
            
            // æ›´æ–°å–å‡ºä¿¡å·æ˜¾ç¤º
            updateSignalDisplay('sell', sellCount, 4);
        }

        function updateSignalDisplay(type, count, total) {
            const percentage = (count / total) * 100;
            let status, strength, color;
            
            if (percentage >= 75) {
                status = 'ğŸ”¥ å¼ºçƒˆ';
                strength = `${count}/${total} æ¡ä»¶æ»¡è¶³`;
                color = type === 'buy' ? '#00ff00' : '#ff4444';
            } else if (percentage >= 50) {
                status = 'âš¡ ä¸­ç­‰';
                strength = `${count}/${total} æ¡ä»¶æ»¡è¶³`;
                color = '#ffaa00';
            } else if (percentage >= 25) {
                status = 'âš ï¸ å¼±';
                strength = `${count}/${total} æ¡ä»¶æ»¡è¶³`;
                color = '#ffaa00';
            } else {
                status = 'âŒ æ— ';
                strength = `${count}/${total} æ¡ä»¶æ»¡è¶³`;
                color = '#666';
            }
            
            document.getElementById(`${type}SignalStatus`).textContent = status;
            document.getElementById(`${type}SignalStatus`).style.color = color;
            document.getElementById(`${type}SignalStrength`).textContent = strength;
        }

        // è·å–BTCä»·æ ¼
        async function fetchBTCPrice() {
            try {
                const response = await fetch('https://api.coingecko.com/api/v3/simple/price?ids=bitcoin&vs_currencies=usd&include_24hr_change=true&include_24hr_vol=true&include_high_low_24h=true');
                const data = await response.json();
                
                previousPrice = currentPrice;
                currentPrice = data.bitcoin.usd;
                
                // æ›´æ–°ä»·æ ¼æ˜¾ç¤º
                document.getElementById('currentPrice').textContent = 
                    `$${currentPrice.toLocaleString('en-US', {minimumFractionDigits: 0, maximumFractionDigits: 0})}`;
                
                // æ›´æ–°ä»·æ ¼å˜åŒ–
                const change = data.bitcoin.usd_24h_change;
                const changeElement = document.getElementById('priceChange');
                changeElement.textContent = 
                    `24H: ${change >= 0 ? '+' : ''}${change.toFixed(2)}%`;
                
                // è®¾ç½®ä»·æ ¼å˜åŒ–é¢œè‰²
                if (change >= 0) {
                    changeElement.className = 'price-change green';
                } else {
                    changeElement.className = 'price-change red';
                }
                
                // æ›´æ–°å¸‚åœºæ•°æ®
                document.getElementById('high24h').textContent = 
                    `$${Math.round(data.bitcoin.usd_24h_high || 0).toLocaleString()}`;
                document.getElementById('low24h').textContent = 
                    `$${Math.round(data.bitcoin.usd_24h_low || 0).toLocaleString()}`;
                document.getElementById('volume24h').textContent = 
                    `$${(data.bitcoin.usd_24h_vol / 1000000000).toFixed(1)}B`;
                
                // æ·»åŠ åˆ°ä»·æ ¼æ•°æ®
                priceData.push(currentPrice);
                if (priceData.length > 50) {
                    priceData.shift();
                }
                
                // è®¡ç®—æŠ€æœ¯æŒ‡æ ‡
                const indicators = calculateIndicators(priceData);
                updateTradingSignals(indicators);
                
                // æ›´æ–°æ—¶é—´
                document.getElementById('updateTime').textContent = 
                    `æœ€å¾Œæ›´æ–°: ${new Date().toLocaleTimeString('zh-TW')}`;
                
            } catch (error) {
                console.error('è·å–ä»·æ ¼å¤±è´¥:', error);
                document.getElementById('currentPrice').textContent = 'è·å–å¤±è´¥';
            }
        }

        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            fetchBTCPrice();
            
            // æ¯30ç§’æ›´æ–°ä¸€æ¬¡
            setInterval(fetchBTCPrice, 30000);
        });
    </script>
</body>
</html> 