<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>üìä BTC‰∏ì‰∏öÊäÄÊúØÂàÜÊûê‰∏≠ÂøÉ</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            background: linear-gradient(135deg, #0a0a2e, #1a1a3e, #16213e);
            color: #00ff88;
            font-family: 'Courier New', monospace;
            overflow-x: auto;
            min-height: 100vh;
        }
        
        .header {
            background: linear-gradient(90deg, #000, #1a1a2e, #000);
            padding: 20px 0;
            text-align: center;
            border-bottom: 3px solid #00ff88;
            box-shadow: 0 5px 15px rgba(0,255,136,0.3);
        }
        
        .title {
            font-size: 2.5em;
            text-shadow: 0 0 20px #00ff88;
            animation: glow 2s ease-in-out infinite alternate;
            margin-bottom: 10px;
        }
        
        .subtitle {
            font-size: 1.2em;
            color: #ffaa00;
            animation: pulse 3s ease-in-out infinite;
        }
        
        @keyframes glow {
            from { text-shadow: 0 0 20px #00ff88; }
            to { text-shadow: 0 0 30px #00ff88, 0 0 40px #00ff88; }
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 0.8; }
            50% { opacity: 1; }
        }
        
        .main-dashboard {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 20px;
            padding: 20px;
            max-width: 1400px;
            margin: 0 auto;
        }
        
        .left-panel {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .price-overview {
            background: rgba(0,0,0,0.9);
            border: 2px solid #00ff88;
            border-radius: 12px;
            padding: 20px;
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 20px;
            box-shadow: 0 5px 20px rgba(0,255,136,0.2);
        }
        
        .price-main {
            text-align: center;
        }
        
        .price-label {
            font-size: 1.5em;
            color: #ffaa00;
            margin-bottom: 10px;
        }
        
        .current-price {
            font-size: 3.5em;
            font-weight: bold;
            text-shadow: 0 0 15px #00ff88;
            animation: priceFlash 1s ease-in-out infinite;
        }
        
        @keyframes priceFlash {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.02); }
        }
        
        .price-change {
            font-size: 1.5em;
            margin: 10px 0;
            padding: 8px 12px;
            border-radius: 6px;
            font-weight: bold;
        }
        
        .price-stats {
            display: flex;
            flex-direction: column;
            justify-content: space-around;
        }
        
        .stat-item {
            display: flex;
            justify-content: space-between;
            margin: 5px 0;
            padding: 8px;
            background: rgba(255,255,255,0.05);
            border-radius: 5px;
        }
        
        .technical-indicators {
            background: rgba(0,0,0,0.9);
            border: 2px solid #ffaa00;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 5px 20px rgba(255,170,0,0.2);
        }
        
        .indicators-title {
            font-size: 1.8em;
            text-align: center;
            margin-bottom: 20px;
            color: #ffaa00;
        }
        
        .indicators-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        .indicator-group {
            background: rgba(255,255,255,0.05);
            border: 1px solid #333;
            border-radius: 8px;
            padding: 15px;
        }
        
        .indicator-title {
            font-size: 1.3em;
            margin-bottom: 10px;
            color: #00ff88;
            border-bottom: 1px solid #333;
            padding-bottom: 5px;
        }
        
        .indicator-value {
            margin: 8px 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .indicator-status {
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.9em;
            font-weight: bold;
        }
        
        .bullish { background: rgba(0,255,0,0.2); color: #00ff00; }
        .bearish { background: rgba(255,0,0,0.2); color: #ff4444; }
        .neutral { background: rgba(255,170,0,0.2); color: #ffaa00; }
        
        .right-panel {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .signal-panel {
            background: rgba(0,0,0,0.9);
            border: 2px solid #aa00ff;
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 5px 20px rgba(170,0,255,0.2);
        }
        
        .signal-title {
            font-size: 1.8em;
            color: #aa00ff;
            margin-bottom: 15px;
        }
        
        .signal-result {
            font-size: 3em;
            font-weight: bold;
            margin: 20px 0;
            text-shadow: 0 0 15px currentColor;
            animation: signalPulse 2s ease-in-out infinite;
        }
        
        @keyframes signalPulse {
            0%, 100% { opacity: 0.8; }
            50% { opacity: 1; }
        }
        
        .signal-details {
            font-size: 1.1em;
            line-height: 1.6;
            margin: 15px 0;
        }
        
        .confidence-meter {
            background: rgba(255,255,255,0.1);
            border-radius: 20px;
            height: 30px;
            margin: 15px 0;
            position: relative;
            overflow: hidden;
        }
        
        .confidence-fill {
            height: 100%;
            border-radius: 20px;
            transition: width 0.5s ease;
            position: relative;
        }
        
        .confidence-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-weight: bold;
            z-index: 2;
        }
        
        .market-analysis {
            background: rgba(0,0,0,0.9);
            border: 2px solid #ff6600;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 5px 20px rgba(255,102,0,0.2);
        }
        
        .analysis-title {
            font-size: 1.5em;
            color: #ff6600;
            margin-bottom: 15px;
            text-align: center;
        }
        
        .support-resistance {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin: 15px 0;
        }
        
        .sr-item {
            background: rgba(255,255,255,0.05);
            padding: 10px;
            border-radius: 6px;
            text-align: center;
        }
        
        .sr-label {
            font-size: 0.9em;
            color: #aaa;
            margin-bottom: 5px;
        }
        
        .sr-value {
            font-size: 1.4em;
            font-weight: bold;
        }
        
        .update-info {
            position: fixed;
            top: 10px;
            right: 20px;
            background: rgba(0,0,0,0.8);
            padding: 8px 12px;
            border-radius: 6px;
            border: 1px solid #00ff88;
            font-size: 0.9em;
            z-index: 1000;
        }
        
        .status-indicator {
            display: inline-block;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            margin-right: 8px;
            animation: blink 1s ease-in-out infinite;
        }
        
        .status-live { background: #00ff00; }
        
        @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0.3; }
        }
        
        /* ÂìçÂ∫îÂºèËÆæËÆ° */
        @media (max-width: 1200px) {
            .main-dashboard {
                grid-template-columns: 1fr;
            }
            
            .price-overview {
                grid-template-columns: 1fr;
                text-align: center;
            }
            
            .indicators-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="update-info" id="updateTime">
        <span class="status-indicator status-live"></span>
        ÂÆûÊó∂Êõ¥Êñ∞‰∏≠...
    </div>

    <div class="header">
        <div class="title">üìä BTC‰∏ì‰∏öÊäÄÊúØÂàÜÊûê‰∏≠ÂøÉ</div>
        <div class="subtitle">üéØ Â§öÊåáÊ†á‰∫§ÂèâÁ°ÆËÆ§Á≥ªÁªü | üìà ÂÆûÊó∂‰π∞Âçñ‰ø°Âè∑ | üí° ‰∏ì‰∏öÊäïËµÑÂàÜÊûê</div>
    </div>

    <div class="main-dashboard">
        <div class="left-panel">
            <!-- ‰ª∑Ê†ºÊ¶ÇËßà -->
            <div class="price-overview">
                <div class="price-main">
                    <div class="price-label">üíé BTC ÂΩìÂâç‰ª∑Ê†º</div>
                    <div class="current-price" id="currentPrice">Âä†ËΩΩ‰∏≠...</div>
                    <div class="price-change" id="priceChange">--</div>
                </div>
                
                <div class="price-stats">
                    <div class="stat-item">
                        <span>24HÊúÄÈ´ò:</span>
                        <span id="high24h">--</span>
                    </div>
                    <div class="stat-item">
                        <span>24HÊúÄ‰Ωé:</span>
                        <span id="low24h">--</span>
                    </div>
                    <div class="stat-item">
                        <span>24HÊàê‰∫§Èáè:</span>
                        <span id="volume24h">--</span>
                    </div>
                    <div class="stat-item">
                        <span>Â∏ÇÂÄºÊéíÂêç:</span>
                        <span>#1</span>
                    </div>
                </div>
                
                <div class="price-stats">
                    <div class="stat-item">
                        <span>7Êó•ÂèòÂåñ:</span>
                        <span id="change7d">--</span>
                    </div>
                    <div class="stat-item">
                        <span>30Êó•ÂèòÂåñ:</span>
                        <span id="change30d">--</span>
                    </div>
                    <div class="stat-item">
                        <span>Â∏ÇÂú∫ÊÉÖÁª™:</span>
                        <span id="marketSentiment">ÂàÜÊûê‰∏≠</span>
                    </div>
                    <div class="stat-item">
                        <span>Ê≥¢Âä®Áéá:</span>
                        <span id="volatility">--</span>
                    </div>
                </div>
            </div>

            <!-- ÊäÄÊúØÊåáÊ†á -->
            <div class="technical-indicators">
                <div class="indicators-title">üî¨ Ê†∏ÂøÉÊäÄÊúØÊåáÊ†áÂàÜÊûê</div>
                <div class="indicators-grid">
                    <!-- MACDÊåáÊ†á -->
                    <div class="indicator-group">
                        <div class="indicator-title">üìà MACD (12,26,9)</div>
                        <div class="indicator-value">
                            <span>MACDÁ∫ø:</span>
                            <span id="macdLine">--</span>
                        </div>
                        <div class="indicator-value">
                            <span>‰ø°Âè∑Á∫ø:</span>
                            <span id="macdSignal">--</span>
                        </div>
                        <div class="indicator-value">
                            <span>Êü±Áä∂Âõæ:</span>
                            <span id="macdHistogram">--</span>
                        </div>
                        <div class="indicator-value">
                            <span>Áä∂ÊÄÅ:</span>
                            <span class="indicator-status" id="macdStatus">ÂàÜÊûê‰∏≠</span>
                        </div>
                    </div>

                    <!-- RSIÊåáÊ†á -->
                    <div class="indicator-group">
                        <div class="indicator-title">‚ö° RSI (14)</div>
                        <div class="indicator-value">
                            <span>RSIÂÄº:</span>
                            <span id="rsiValue">--</span>
                        </div>
                        <div class="indicator-value">
                            <span>Âå∫Èó¥:</span>
                            <span id="rsiZone">--</span>
                        </div>
                        <div class="indicator-value">
                            <span>Áä∂ÊÄÅ:</span>
                            <span class="indicator-status" id="rsiStatus">ÂàÜÊûê‰∏≠</span>
                        </div>
                    </div>

                    <!-- ÁßªÂä®Âπ≥ÂùáÁ∫ø -->
                    <div class="indicator-group">
                        <div class="indicator-title">üìä ÁßªÂä®Âπ≥ÂùáÁ∫ø</div>
                        <div class="indicator-value">
                            <span>MA5:</span>
                            <span id="ma5">--</span>
                        </div>
                        <div class="indicator-value">
                            <span>MA10:</span>
                            <span id="ma10">--</span>
                        </div>
                        <div class="indicator-value">
                            <span>MA25:</span>
                            <span id="ma25">--</span>
                        </div>
                        <div class="indicator-value">
                            <span>MA99:</span>
                            <span id="ma99">--</span>
                        </div>
                        <div class="indicator-value">
                            <span>ÊéíÂàó:</span>
                            <span class="indicator-status" id="maStatus">ÂàÜÊûê‰∏≠</span>
                        </div>
                    </div>

                    <!-- Â∏ÉÊûóÂ∏¶ -->
                    <div class="indicator-group">
                        <div class="indicator-title">üåä Â∏ÉÊûóÂ∏¶ (20,2)</div>
                        <div class="indicator-value">
                            <span>‰∏äËΩ®:</span>
                            <span id="bbUpper">--</span>
                        </div>
                        <div class="indicator-value">
                            <span>‰∏≠ËΩ®:</span>
                            <span id="bbMiddle">--</span>
                        </div>
                        <div class="indicator-value">
                            <span>‰∏ãËΩ®:</span>
                            <span id="bbLower">--</span>
                        </div>
                        <div class="indicator-value">
                            <span>‰ΩçÁΩÆ:</span>
                            <span class="indicator-status" id="bbStatus">ÂàÜÊûê‰∏≠</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="right-panel">
            <!-- ‰ø°Âè∑Èù¢Êùø -->
            <div class="signal-panel">
                <div class="signal-title">üöÄ Â§öÊåáÊ†á‰∫§ÂèâÁ°ÆËÆ§</div>
                <div class="signal-result" id="signalResult">ÂàÜÊûê‰∏≠</div>
                <div class="signal-details" id="signalDetails">
                    Ê≠£Âú®Êî∂ÈõÜÊäÄÊúØÊåáÊ†áÊï∞ÊçÆ...
                </div>
                
                <div class="confidence-meter">
                    <div class="confidence-fill" id="confidenceFill" style="width: 0%"></div>
                    <div class="confidence-text" id="confidenceText">‰ø°ÂøÉÊåáÊï∞: 0%</div>
                </div>

                <div style="margin-top: 15px; font-size: 1em; color: #aaa;">
                    <div>‚úÖ Â§öÂ§¥‰ø°Âè∑: <span id="bullSignals">0</span>/6</div>
                    <div>‚ùå Á©∫Â§¥‰ø°Âè∑: <span id="bearSignals">0</span>/6</div>
                </div>
            </div>

            <!-- Â∏ÇÂú∫ÂàÜÊûê -->
            <div class="market-analysis">
                <div class="analysis-title">üìä ÂÖ≥ÈîÆ‰ΩçÂàÜÊûê</div>
                
                <div class="support-resistance">
                    <div class="sr-item">
                        <div class="sr-label">Âº∫ÊîØÊíë‰Ωç</div>
                        <div class="sr-value" id="strongSupport" style="color: #00ff00;">--</div>
                    </div>
                    <div class="sr-item">
                        <div class="sr-label">Âº∫ÈòªÂäõ‰Ωç</div>
                        <div class="sr-value" id="strongResistance" style="color: #ff4444;">--</div>
                    </div>
                </div>

                <div style="margin: 15px 0; padding: 15px; background: rgba(255,255,255,0.05); border-radius: 8px;">
                    <div style="font-size: 1.1em; color: #ffaa00; margin-bottom: 10px;">üìà ‰∫§ÊòìÂª∫ËÆÆ</div>
                    <div id="tradingAdvice" style="line-height: 1.6;">
                        Á≠âÂæÖÊäÄÊúØÊåáÊ†áÁ°ÆËÆ§...
                    </div>
                </div>

                <div style="margin: 15px 0; padding: 15px; background: rgba(255,255,255,0.05); border-radius: 8px;">
                    <div style="font-size: 1.1em; color: #ffaa00; margin-bottom: 10px;">‚ö†Ô∏è È£éÈô©ÊèêÁ§∫</div>
                    <div style="font-size: 0.9em; color: #ccc; line-height: 1.5;">
                        Êú¨ÂàÜÊûê‰ªÖ‰æõÂèÇËÄÉÔºåÊäïËµÑÊúâÈ£éÈô©ÔºåÂÖ•Â∏ÇÈúÄË∞®ÊÖé„ÄÇÂª∫ËÆÆÁªìÂêàÂü∫Êú¨Èù¢ÂàÜÊûêÂíåÈ£éÈô©ÁÆ°ÁêÜ„ÄÇ
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ÂÖ®Â±ÄÂèòÈáè
        let priceData = [];
        let currentPrice = 0;
        let updateCount = 0;

        // ÊäÄÊúØÊåáÊ†áËÆ°ÁÆóÂáΩÊï∞
        function calculateSMA(data, period) {
            if (data.length < period) return null;
            const sum = data.slice(-period).reduce((a, b) => a + b, 0);
            return sum / period;
        }

        function calculateEMA(data, period) {
            if (data.length < period) return null;
            const multiplier = 2 / (period + 1);
            let ema = data[0];
            for (let i = 1; i < data.length; i++) {
                ema = (data[i] * multiplier) + (ema * (1 - multiplier));
            }
            return ema;
        }

        function calculateMACD(data) {
            if (data.length < 26) return null;
            
            const ema12 = calculateEMA(data, 12);
            const ema26 = calculateEMA(data, 26);
            const macdLine = ema12 - ema26;
            
            // ÁÆÄÂåñÁöÑ‰ø°Âè∑Á∫øËÆ°ÁÆó
            const signal = macdLine * 0.9;
            const histogram = macdLine - signal;
            
            return { line: macdLine, signal: signal, histogram: histogram };
        }

        function calculateRSI(data, period = 14) {
            if (data.length < period + 1) return null;
            
            let gains = 0, losses = 0;
            for (let i = data.length - period; i < data.length; i++) {
                const change = data[i] - data[i-1];
                if (change > 0) gains += change;
                else losses -= change;
            }
            
            const avgGain = gains / period;
            const avgLoss = losses / period;
            
            if (avgLoss === 0) return 100;
            const rs = avgGain / avgLoss;
            return 100 - (100 / (1 + rs));
        }

        function calculateBollingerBands(data, period = 20, stdDev = 2) {
            if (data.length < period) return null;
            
            const sma = calculateSMA(data, period);
            const recentData = data.slice(-period);
            const variance = recentData.reduce((sum, price) => {
                return sum + Math.pow(price - sma, 2);
            }, 0) / period;
            
            const standardDev = Math.sqrt(variance);
            
            return {
                upper: sma + (standardDev * stdDev),
                middle: sma,
                lower: sma - (standardDev * stdDev)
            };
        }

        // ‰ø°Âè∑ÂàÜÊûêÂáΩÊï∞
        function analyzeSignals(indicators) {
            let bullishSignals = 0;
            let bearishSignals = 0;
            let signals = [];

            // MACDÂàÜÊûê
            if (indicators.macd) {
                if (indicators.macd.histogram > 0 && indicators.macd.line > indicators.macd.signal) {
                    bullishSignals++;
                    signals.push("MACDÈáëÂèâ");
                } else if (indicators.macd.histogram < 0 && indicators.macd.line < indicators.macd.signal) {
                    bearishSignals++;
                    signals.push("MACDÊ≠ªÂèâ");
                }
            }

            // RSIÂàÜÊûê
            if (indicators.rsi) {
                if (indicators.rsi < 30) {
                    bullishSignals++;
                    signals.push("RSIË∂ÖÂçñ");
                } else if (indicators.rsi > 70) {
                    bearishSignals++;
                    signals.push("RSIË∂Ö‰π∞");
                }
            }

            // ÁßªÂä®Âπ≥ÂùáÁ∫øÂàÜÊûê
            if (indicators.ma5 && indicators.ma10 && indicators.ma25) {
                if (currentPrice > indicators.ma5 && indicators.ma5 > indicators.ma10 && indicators.ma10 > indicators.ma25) {
                    bullishSignals++;
                    signals.push("ÂùáÁ∫øÂ§öÂ§¥ÊéíÂàó");
                } else if (currentPrice < indicators.ma5 && indicators.ma5 < indicators.ma10 && indicators.ma10 < indicators.ma25) {
                    bearishSignals++;
                    signals.push("ÂùáÁ∫øÁ©∫Â§¥ÊéíÂàó");
                }
            }

            // Â∏ÉÊûóÂ∏¶ÂàÜÊûê
            if (indicators.bb) {
                if (currentPrice < indicators.bb.lower) {
                    bullishSignals++;
                    signals.push("Ë∑åÁ†¥Â∏ÉÊûó‰∏ãËΩ®");
                } else if (currentPrice > indicators.bb.upper) {
                    bearishSignals++;
                    signals.push("Á™ÅÁ†¥Â∏ÉÊûó‰∏äËΩ®");
                }
            }

            return { bullishSignals, bearishSignals, signals };
        }

        // Êõ¥Êñ∞ÁïåÈù¢
        function updateInterface(data, indicators) {
            // Êõ¥Êñ∞‰ª∑Ê†º‰ø°ÊÅØ
            document.getElementById('currentPrice').textContent = 
                `$${currentPrice.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2})}`;
            
            const change24h = data.price_change_percentage_24h;
            const changeElement = document.getElementById('priceChange');
            changeElement.textContent = `24H: ${change24h >= 0 ? '+' : ''}${change24h.toFixed(2)}%`;
            changeElement.className = `price-change ${change24h >= 0 ? 'bullish' : 'bearish'}`;

            // Êõ¥Êñ∞‰ª∑Ê†ºÁªüËÆ°
            document.getElementById('high24h').textContent = `$${data.high_24h?.toLocaleString() || '--'}`;
            document.getElementById('low24h').textContent = `$${data.low_24h?.toLocaleString() || '--'}`;
            document.getElementById('volume24h').textContent = `$${(data.total_volume / 1000000000).toFixed(1)}B`;
            
            // Êõ¥Êñ∞ÊäÄÊúØÊåáÊ†á
            if (indicators.macd) {
                document.getElementById('macdLine').textContent = indicators.macd.line.toFixed(2);
                document.getElementById('macdSignal').textContent = indicators.macd.signal.toFixed(2);
                document.getElementById('macdHistogram').textContent = indicators.macd.histogram.toFixed(2);
                
                const macdStatus = indicators.macd.histogram > 0 ? 'bullish' : 'bearish';
                document.getElementById('macdStatus').textContent = indicators.macd.histogram > 0 ? 'ÈáëÂèâ' : 'Ê≠ªÂèâ';
                document.getElementById('macdStatus').className = `indicator-status ${macdStatus}`;
            }

            if (indicators.rsi) {
                document.getElementById('rsiValue').textContent = indicators.rsi.toFixed(1);
                let rsiZone = 'Ê≠£Â∏∏';
                let rsiStatus = 'neutral';
                
                if (indicators.rsi < 30) {
                    rsiZone = 'Ë∂ÖÂçñ';
                    rsiStatus = 'bullish';
                } else if (indicators.rsi > 70) {
                    rsiZone = 'Ë∂Ö‰π∞';
                    rsiStatus = 'bearish';
                }
                
                document.getElementById('rsiZone').textContent = rsiZone;
                document.getElementById('rsiStatus').textContent = rsiZone;
                document.getElementById('rsiStatus').className = `indicator-status ${rsiStatus}`;
            }

            // Êõ¥Êñ∞ÁßªÂä®Âπ≥ÂùáÁ∫ø
            if (indicators.ma5) document.getElementById('ma5').textContent = `$${indicators.ma5.toFixed(0)}`;
            if (indicators.ma10) document.getElementById('ma10').textContent = `$${indicators.ma10.toFixed(0)}`;
            if (indicators.ma25) document.getElementById('ma25').textContent = `$${indicators.ma25.toFixed(0)}`;
            if (indicators.ma99) document.getElementById('ma99').textContent = `$${indicators.ma99.toFixed(0)}`;

            // Êõ¥Êñ∞Â∏ÉÊûóÂ∏¶
            if (indicators.bb) {
                document.getElementById('bbUpper').textContent = `$${indicators.bb.upper.toFixed(0)}`;
                document.getElementById('bbMiddle').textContent = `$${indicators.bb.middle.toFixed(0)}`;
                document.getElementById('bbLower').textContent = `$${indicators.bb.lower.toFixed(0)}`;
                
                let bbPosition = '‰∏≠ËΩ®';
                if (currentPrice > indicators.bb.upper) bbPosition = '‰∏äËΩ®Á™ÅÁ†¥';
                else if (currentPrice < indicators.bb.lower) bbPosition = '‰∏ãËΩ®Ë∑åÁ†¥';
                
                document.getElementById('bbStatus').textContent = bbPosition;
            }

            // ‰ø°Âè∑ÂàÜÊûê
            const signalAnalysis = analyzeSignals(indicators);
            document.getElementById('bullSignals').textContent = signalAnalysis.bullishSignals;
            document.getElementById('bearSignals').textContent = signalAnalysis.bearishSignals;

            // ÁªºÂêà‰ø°Âè∑
            let overallSignal = 'ËßÇÊúõ';
            let signalColor = '#ffaa00';
            let confidence = 50;

            if (signalAnalysis.bullishSignals > signalAnalysis.bearishSignals + 1) {
                overallSignal = 'üöÄ ‰π∞ÂÖ•‰ø°Âè∑';
                signalColor = '#00ff00';
                confidence = Math.min(90, 50 + signalAnalysis.bullishSignals * 10);
            } else if (signalAnalysis.bearishSignals > signalAnalysis.bullishSignals + 1) {
                overallSignal = 'üìâ ÂçñÂá∫‰ø°Âè∑';
                signalColor = '#ff4444';
                confidence = Math.min(90, 50 + signalAnalysis.bearishSignals * 10);
            }

            document.getElementById('signalResult').textContent = overallSignal;
            document.getElementById('signalResult').style.color = signalColor;
            
            document.getElementById('signalDetails').textContent = 
                signalAnalysis.signals.length > 0 ? signalAnalysis.signals.join(', ') : 'Á≠âÂæÖÊòéÁ°Æ‰ø°Âè∑';

            // ‰ø°ÂøÉÊåáÊï∞
            document.getElementById('confidenceText').textContent = `‰ø°ÂøÉÊåáÊï∞: ${confidence}%`;
            document.getElementById('confidenceFill').style.width = `${confidence}%`;
            document.getElementById('confidenceFill').style.background = 
                confidence > 70 ? '#00ff00' : confidence > 50 ? '#ffaa00' : '#ff4444';

            // ÊîØÊíëÈòªÂäõ‰Ωç
            if (indicators.bb) {
                document.getElementById('strongSupport').textContent = `$${Math.round(indicators.bb.lower)}`;
                document.getElementById('strongResistance').textContent = `$${Math.round(indicators.bb.upper)}`;
            }

            // ‰∫§ÊòìÂª∫ËÆÆ
            let advice = 'Á≠âÂæÖÊõ¥Â§öÁ°ÆËÆ§‰ø°Âè∑';
            if (signalAnalysis.bullishSignals >= 3) {
                advice = 'Âª∫ËÆÆÂàÜÊâπ‰π∞ÂÖ•ÔºåËÆæÁΩÆÊ≠¢Êçü‰Ωç‰∫é $' + Math.round(indicators.bb?.lower || currentPrice * 0.95);
            } else if (signalAnalysis.bearishSignals >= 3) {
                advice = 'Âª∫ËÆÆÈÄ¢È´òÂáè‰ªìÔºåËÆæÁΩÆÊ≠¢Áõà‰Ωç‰∫é $' + Math.round(indicators.bb?.upper || currentPrice * 1.05);
            }
            document.getElementById('tradingAdvice').textContent = advice;

            // Êõ¥Êñ∞Êó∂Èó¥
            document.getElementById('updateTime').innerHTML = 
                `<span class="status-indicator status-live"></span>ÊúÄÂêéÊõ¥Êñ∞: ${new Date().toLocaleTimeString('zh-CN')}`;
        }

        // Ëé∑ÂèñBTCÊï∞ÊçÆ
        async function fetchBTCData() {
            try {
                const response = await fetch(
                    'https://api.coingecko.com/api/v3/coins/bitcoin?localization=false&tickers=false&market_data=true&community_data=false&developer_data=false'
                );
                const data = await response.json();
                
                currentPrice = data.market_data.current_price.usd;
                priceData.push(currentPrice);
                
                // ‰øùÊåÅÊúÄËøë50‰∏™‰ª∑Ê†ºÁÇπ
                if (priceData.length > 50) {
                    priceData.shift();
                }

                // ËÆ°ÁÆóÊäÄÊúØÊåáÊ†á
                const indicators = {
                    macd: calculateMACD(priceData),
                    rsi: calculateRSI(priceData),
                    ma5: calculateSMA(priceData, 5),
                    ma10: calculateSMA(priceData, 10),
                    ma25: calculateSMA(priceData, 25),
                    ma99: calculateSMA(priceData, 50), // Áî®50‰ª£Êõø99ÔºåÂõ†‰∏∫Êï∞ÊçÆÁÇπ‰∏çÂ§ü
                    bb: calculateBollingerBands(priceData)
                };

                updateInterface(data.market_data, indicators);
                updateCount++;

            } catch (error) {
                console.error('Ëé∑ÂèñÊï∞ÊçÆÂ§±Ë¥•:', error);
                document.getElementById('currentPrice').textContent = 'Ëé∑ÂèñÂ§±Ë¥•';
            }
        }

        // ÂàùÂßãÂåñ
        document.addEventListener('DOMContentLoaded', function() {
            fetchBTCData();
            
            // ÊØè20ÁßíÊõ¥Êñ∞‰∏ÄÊ¨°
            setInterval(fetchBTCData, 20000);
        });
    </script>
</body>
</html> 